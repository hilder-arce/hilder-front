<!-- DESKTOP SIDEBAR -->
<aside
  class="fixed inset-y-0 left-0 z-[2000]
         hidden lg:flex
         transition-all duration-500 ease-[cubic-bezier(.4,0,.2,1)]"
  [class.w-[280px]]="!isCollapsed"
  [class.w-[72px]]="isCollapsed">

  <!-- CONTENEDOR -->
  <div
    class="h-full w-full flex flex-col
           bg-gradient-to-b from-[#0b0f19]/95 to-[#05070d]/95
           backdrop-blur-xl
           border-r border-white/5
           shadow-[0_0_60px_-15px_rgba(99,102,241,0.25)]">

    <!-- HEADER -->
    <div
      class="h-14 flex items-center shrink-0 transition-all duration-300"
      [class.justify-between]="!isCollapsed"
      [class.justify-center]="isCollapsed"
      [class.px-4]="!isCollapsed"
      [class.px-2]="isCollapsed">

      <!-- LOGO -->
      <div *ngIf="!isCollapsed" class="flex items-center gap-2">
        <div
          class="w-8 h-8 rounded-lg
                 bg-gradient-to-br from-indigo-500 to-cyan-400
                 shadow-[0_0_20px_rgba(99,102,241,.6)]">
        </div>

        <span class="text-sm font-semibold tracking-wide text-white/90">
          CAJACE EIRL
        </span>
      </div>

      <!-- BOTÓN COLAPSAR -->
      <button
        (click)="onToggle()"
        class="group relative w-9 h-9 flex items-center justify-center
               rounded-lg
               bg-white/[0.03]
               border border-white/10
               text-white/60
               hover:text-white
               hover:bg-white/[0.08]
               hover:border-white/20
               active:scale-95
               transition-all duration-300">

        <svg width="18" height="18" viewBox="0 0 24 24"
             fill="none" stroke="currentColor" stroke-width="2">
          <rect x="3" y="4" width="18" height="16" rx="2" />
          <line x1="9" y1="4" x2="9" y2="20" />
        </svg>

        <span *ngIf="isCollapsed" class="ml-2 sidebar-tooltip">
          Barra lateral
        </span>
      </button>
    </div>

    <!-- MENU -->
    <div
      class="mt-3 transition-all duration-300"
      [class.px-3]="!isCollapsed"
      [class.px-2]="isCollapsed">

      <!-- DASHBOARD -->
      <button
        routerLink="/dashboard"
        class="group relative sidebar-item"
        [class.justify-center]="isCollapsed">

        <svg width="18" height="18" viewBox="0 0 24 24"
             fill="none" stroke="currentColor" stroke-width="2">
          <rect x="3" y="3" width="7" height="7" rx="1.5" />
          <rect x="14" y="3" width="7" height="7" rx="1.5" />
          <rect x="3" y="14" width="18" height="7" rx="1.5" />
        </svg>

        <span *ngIf="!isCollapsed" class="sidebar-label">
          Dashboard
        </span>

        <span *ngIf="isCollapsed" class="sidebar-tooltip">
          Dashboard
        </span>
      </button>

      <!-- USUARIOS -->
      <button
        routerLink="users"
        class="group relative sidebar-item"
        [class.justify-center]="isCollapsed">

        <i class="bi bi-people sidebar-icon"></i>

        <span *ngIf="!isCollapsed" class="sidebar-label">
          Usuarios
        </span>

        <span *ngIf="isCollapsed" class="sidebar-tooltip">
          Usuarios
        </span>
      </button>

      <!-- REPORTES -->
      <button
        routerLink="reports"
        class="group relative sidebar-item"
        [class.justify-center]="isCollapsed">

        <i class="bi bi-bar-chart sidebar-icon"></i>

        <span *ngIf="!isCollapsed" class="sidebar-label">
          Reportes
        </span>

        <span *ngIf="isCollapsed" class="sidebar-tooltip">
          Reportes
        </span>
      </button>

      <!-- CONFIG -->
      <button
        routerLink="config"
        class="group relative sidebar-item"
        [class.justify-center]="isCollapsed">

        <i class="bi bi-gear sidebar-icon"></i>

        <span *ngIf="!isCollapsed" class="sidebar-label">
          Configuración
        </span>

        <span *ngIf="isCollapsed" class="sidebar-tooltip">
          Configuración
        </span>
      </button>
    </div>

    <!-- FOOTER -->
    <div
      *ngIf="auth.currentUser as user"
      class="mt-auto border-t border-white/5
            bg-gradient-to-t from-black/30 to-transparent
            px-3 py-3">

      <button
        class="group relative w-full flex items-center gap-3
              rounded-lg px-2 py-2
              hover:bg-white/5 transition-all">

        <!-- Avatar premium -->
        <div
          class="w-9 h-9 rounded-full
                flex items-center justify-center
                bg-gradient-to-br from-indigo-500 to-cyan-400
                text-white font-semibold
                ring-2 ring-white/10">
          {{ user.nameUser[0] | uppercase }}
        </div>

        <!-- Info -->
        <div *ngIf="!isCollapsed" class="leading-tight">
          <div class="text-xs font-medium text-white">
            {{ user.nameUser }}
          </div>
          <div class="text-[11px] uppercase tracking-wide text-white/40">
            {{ user.email }}
          </div>
        </div>

        <!-- Tooltip collapsed -->
        <span *ngIf="isCollapsed" class="sidebar-tooltip">
          {{ user.userType }} . {{ user.nameUser }}
        </span>

      </button>
    </div>


  </div>
</aside>
