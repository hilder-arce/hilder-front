<!-- DESKTOP SIDEBAR -->
<aside
  class="fixed inset-y-0 left-0 z-[2000]
         hidden lg:flex
         transition-all duration-500 ease-[cubic-bezier(.4,0,.2,1)]"
  [class.w-[280px]]="!isCollapsed"
  [class.w-[72px]]="isCollapsed">

  <!-- CONTENEDOR -->
  <div
    class="h-full w-full flex flex-col
           bg-gradient-to-b from-[#0b0f19]/95 to-[#05070d]/95
           backdrop-blur-xl
           border-r border-white/5
           shadow-[0_0_60px_-15px_rgba(99,102,241,0.25)]">

    <!-- HEADER -->
    <div
      class="h-14 flex items-center shrink-0 transition-all duration-300"
      [class.justify-between]="!isCollapsed"
      [class.justify-center]="isCollapsed"
      [class.px-4]="!isCollapsed"
      [class.px-2]="isCollapsed">

      <!-- LOGO -->
      <div *ngIf="!isCollapsed" class="flex items-center gap-2">
        <div
          class="w-9 h-9 rounded-lg overflow-hidden
                 bg-white
                 shadow-[0_0_20px_rgba(0,0,0,0.35)]">
          <img
            src="https://i.ibb.co/Hp72r8P8/logo-cajace.jpg"
            alt="CAJACE EIRL"
            class="w-full h-full object-cover"
            loading="lazy" />
        </div>

        <span class="text-sm font-semibold tracking-wide text-white/90">
          CAJACE EIRL
        </span>
      </div>

      <!-- BOTÓN COLAPSAR -->
      <button
        (click)="onToggle()"
        class="group relative
               w-9 h-9
               flex items-center justify-center
               rounded-lg
               bg-white/[0.03]
               border border-white/10
               text-yellow-400/70
               hover:text-yellow-400
               hover:bg-yellow-400/10
               active:scale-95
               transition-all duration-300">

        <i class="bi bi-layout-sidebar-inset text-[16px]"></i>

        <span *ngIf="isCollapsed" class="sidebar-tooltip">
          Barra lateral
        </span>
      </button>
    </div>

    <!-- MENU -->
    <div
      class="mt-3 transition-all duration-300"
      [class.px-3]="!isCollapsed"
      [class.px-2]="isCollapsed">

      <!-- DASHBOARD -->
      <button
        routerLink="/dashboard"
        routerLinkActive="bg-white/10 text-white"
        [routerLinkActiveOptions]="{ exact: true }"
        class="group relative
               w-full flex items-center gap-3
               px-3 py-2.5 mb-1.5
               rounded-lg
               text-[14px]
               text-white/70
               hover:text-white
               hover:bg-white/5
               transition-all duration-200
               cursor-pointer"
        [class.justify-center]="isCollapsed">

        <i class="bi bi-speedometer2 text-[17px]"></i>

        <span *ngIf="!isCollapsed" class="whitespace-nowrap">
          Dashboard
        </span>

        <span *ngIf="isCollapsed" class="sidebar-tooltip">
          Dashboard
        </span>
      </button>

      <!-- USUARIOS -->
      <button
        routerLink="users"
        routerLinkActive="bg-white/10 text-white"
        class="group relative
               w-full flex items-center gap-3
               px-3 py-2.5 mb-1.5
               rounded-lg
               text-[14px]
               text-white/70
               hover:text-white
               hover:bg-white/5
               transition-all duration-200
               cursor-pointer"
        [class.justify-center]="isCollapsed">

        <i class="bi bi-people text-[17px]"></i>

        <span *ngIf="!isCollapsed" class="whitespace-nowrap">
          Usuarios
        </span>

        <span *ngIf="isCollapsed" class="sidebar-tooltip">
          Usuarios
        </span>
      </button>

      <!-- REPORTES -->
      <button
        routerLink="reports"
        routerLinkActive="bg-white/10 text-white"
        class="group relative
               w-full flex items-center gap-3
               px-3 py-2.5 mb-1.5
               rounded-lg
               text-[14px]
               text-white/70
               hover:text-white
               hover:bg-white/5
               transition-all duration-200
               cursor-pointer"
        [class.justify-center]="isCollapsed">

        <i class="bi bi-bar-chart text-[17px]"></i>

        <span *ngIf="!isCollapsed" class="whitespace-nowrap">
          Reportes
        </span>

        <span *ngIf="isCollapsed" class="sidebar-tooltip">
          Reportes
        </span>
      </button>

      <!-- CONFIGURACIÓN -->
      <button
        routerLink="/dashboard/config"
        routerLinkActive="bg-white/10 text-white"
        [routerLinkActiveOptions]="{ exact: false }"
        class="group relative
               w-full flex items-center gap-3
               px-3 py-2.5 mb-1.5
               rounded-lg
               text-[14px]
               text-white/70
               hover:text-white
               hover:bg-white/5
               transition-all duration-200
               cursor-pointer"
        [class.justify-center]="isCollapsed">

        <i class="bi bi-gear text-[17px]"></i>

        <span *ngIf="!isCollapsed" class="whitespace-nowrap">
          Configuración
        </span>

        <span *ngIf="isCollapsed" class="sidebar-tooltip">
          Configuración
        </span>
      </button>
    </div>

    <!-- FOOTER -->
    <div
      *ngIf="auth.currentUser as user"
      class="mt-auto border-t border-white/5
             bg-gradient-to-t from-black/30 to-transparent
             px-3 py-3">

      <div class="flex items-center gap-2">

        <!-- USER -->
        <button
          class="group relative
                 flex-1 flex items-center gap-3
                 px-2 py-2
                 rounded-lg
                 hover:bg-white/5
                 transition-all">

          <div
            class="w-9 h-9 rounded-full
                   flex items-center justify-center
                   bg-gradient-to-br from-indigo-500 to-cyan-400
                   text-white font-semibold
                   ring-2 ring-white/10">
            {{ user.nameUser[0] | uppercase }}
          </div>

          <div *ngIf="!isCollapsed" class="leading-tight min-w-0">
            <div class="text-xs uppercase font-medium text-white truncate">
              {{ user.nameUser }}
            </div>
            <div class="text-[11px] tracking-wide text-white/40 truncate">
              {{ user.email }}
            </div>
          </div>

          <span *ngIf="isCollapsed" class="sidebar-tooltip">
            {{ user.userType }}
          </span>
        </button>

        <!-- LOGOUT -->
        <button
          *ngIf="!isCollapsed"
          (click)="logout()"
          class="group relative
                 w-9 h-9
                 flex items-center justify-center
                 rounded-lg
                 text-red-400/70
                 hover:text-red-400
                 hover:bg-red-500/10
                 transition-all duration-300">

          <i class="bi bi-box-arrow-right text-[16px]"></i>

          <span class="sidebar-tooltip">
            Cerrar sesión
          </span>
        </button>
      </div>
    </div>

  </div>
</aside>
