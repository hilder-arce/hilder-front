<!-- ===============================
     HEADER MOBILE (DARK ENTERPRISE)
================================ -->
<header
  *ngIf="!open"
  class="sticky top-0 z-[1999] md:hidden
         h-14 px-4
         flex items-center justify-between
         bg-gradient-to-b from-[#0b0f19]/95 to-[#05070d]/95
         backdrop-blur-xl
         border-b border-white/5
         shadow-[0_10px_30px_-10px_rgba(99,102,241,0.35)]
         animate-header-in">

  <!-- MENU -->
  <button
    (click)="openSidebar()"
    class="group w-10 h-10 flex items-center justify-center
           rounded-xl
           bg-white/[0.04]
           border border-white/10
           hover:bg-indigo-500/10
           active:scale-95
           transition-all duration-200">

    <i class="bi bi-list text-xl text-white/80
              group-hover:text-indigo-400 transition-colors"></i>
  </button>

  <!-- BRAND -->
  <div class="flex items-center gap-2 min-w-0">
    <div
      class="w-9 h-9 rounded-lg overflow-hidden
             bg-white
             shadow-[0_0_25px_rgba(99,102,241,0.45)]">

      <img
        src="https://i.ibb.co/Hp72r8P8/logo-cajace.jpg"
        alt="CAJACE EIRL"
        class="w-full h-full object-cover"
        loading="lazy" />
    </div>

    <span class="text-sm font-semibold tracking-wide truncate text-white/90">
      CAJACE EIRL
    </span>
  </div>

  <div class="w-10"></div>
</header>

<!-- ===============================
     SIDEBAR MOBILE
================================ -->
<aside
  class="fixed inset-y-0 left-0 z-[2000]
         w-[300px] max-w-[90vw]
         lg:hidden
         transition-transform duration-300 ease-[cubic-bezier(.4,0,.2,1)]
         bg-gradient-to-b from-[#0b0f19]/95 to-[#05070d]/95
         backdrop-blur-xl
         border-r border-white/5
         shadow-[0_0_100px_-30px_rgba(99,102,241,0.45)]"
  [class.translate-x-0]="open"
  [class.-translate-x-full]="!open">

  <div class="h-full flex flex-col">

    <!-- HEADER SIDEBAR -->
    <div
      class="h-14 px-4 flex items-center justify-between
             border-b border-white/5">

      <div class="flex items-center gap-3">
        <div
          class="w-9 h-9 rounded-lg overflow-hidden
                 bg-white
                 shadow-[0_0_25px_rgba(99,102,241,0.45)]">
          <img
            src="https://i.ibb.co/Hp72r8P8/logo-cajace.jpg"
            class="w-full h-full object-cover" />
        </div>

        <span class="text-sm font-semibold text-white/90">
          CAJACE EIRL
        </span>
      </div>

      <button
        (click)="close()"
        class="group w-9 h-9 flex items-center justify-center
               rounded-lg
               text-white/60
               hover:text-white
               hover:bg-white/5
               active:scale-95
               transition-all">

        <i class="bi bi-x-lg text-sm"></i>
      </button>
    </div>

    <!-- QUICK ACTION -->
    <div class="px-4 mt-4">
      <button
        routerLink="/dashboard"
        routerLinkActive="active"
        [routerLinkActiveOptions]="{ exact: true }"
        (click)="close()"
        class="mobile-item group">

        <i class="bi bi-speedometer2"></i>
        Dashboard
      </button>
    </div>

    <!-- NAV -->
    <nav class="mt-5 flex-1 overflow-y-auto px-3 space-y-1 mobile-scroll">

      <button
        routerLink="users"
        routerLinkActive="active"
        (click)="close()"
        class="mobile-item group">

        <i class="bi bi-people"></i>
        Usuarios
      </button>

      <button
        routerLink="reports"
        routerLinkActive="active"
        (click)="close()"
        class="mobile-item group">

        <i class="bi bi-bar-chart"></i>
        Reportes
      </button>

      <button
        routerLink="config"
        routerLinkActive="active"
        (click)="close()"
        class="mobile-item group">

        <i class="bi bi-gear"></i>
        Configuraci√≥n
      </button>
    </nav>

    <!-- FOOTER -->
    <div
      *ngIf="auth.currentUser as user"
      class="mt-auto border-t border-white/5
             bg-gradient-to-t from-black/40 to-transparent
             px-3 py-3">

      <div class="flex items-center gap-2">

        <button
          (click)="close()"
          class="flex-1 flex items-center gap-3
                 rounded-lg px-2 py-2
                 hover:bg-white/5 transition-all">

          <div
            class="w-9 h-9 rounded-full
                   flex items-center justify-center
                   bg-gradient-to-br from-indigo-500 to-yellow-400
                   text-white font-semibold
                   ring-2 ring-white/10
                   animate-pulse-soft">
            {{ user.nameUser[0] | uppercase }}
          </div>

          <div class="leading-tight min-w-0">
            <div class="text-xs uppercase font-medium text-white truncate">
              {{ user.nameUser }}
            </div>
            <div class="text-[11px] text-white/40 truncate">
              {{ user.email }}
            </div>
          </div>
        </button>

        <button
          (click)="logout()"
          class="w-9 h-9 flex items-center justify-center
                 rounded-lg
                 text-red-400/70
                 hover:text-red-400
                 hover:bg-red-500/10
                 transition-all">

          <i class="bi bi-box-arrow-right text-lg"></i>
        </button>

      </div>
    </div>

  </div>
</aside>
