<section class="w-full px-4 py-10">

  <!-- HEADER -->
  <div class="mb-10 flex items-start gap-4">
    <div
      class="w-14 h-14 rounded-2xl flex items-center justify-center
             text-blue-400
             shadow-[0_20px_40px_-15px_rgba(30,41,59,.6)]">
      <i class="bi bi-truck-front-fill text-2xl"></i>
    </div>

    <div>
      <h1 class="text-2xl font-semibold tracking-tight text-black">
        Equipos
      </h1>
      <p class="mt-1 text-sm text-black/60 max-w-xl">
        Control de horómetros, consumo de combustible y estado operativo por turno.
      </p>
    </div>
  </div>

  <!-- CARD -->
  <div
    class="space-y-10 rounded-3xl border border-black/5 bg-white p-8
           shadow-[0_40px_100px_-40px_rgba(0,0,0,.4)]">

    <!-- ===============================
         TABLA DE EQUIPOS
    ================================= -->
    <div class="overflow-hidden rounded-2xl border border-black/5">

      <table class="w-full text-sm">
        <thead class="bg-black/5 uppercase text-xs text-black/70">
          <tr>
            <th class="px-4 py-3 text-left">Equipo</th>
            <th class="px-4 py-3 text-center">Horómetro inicial</th>
            <th class="px-4 py-3 text-center">Horómetro final</th>
            <th class="px-4 py-3 text-center">Horas trabajadas</th>
            <th class="px-4 py-3 text-center">Combustible (gal)</th>
            <th class="px-4 py-3 text-center">Estado</th>
            <th class="px-4 py-3"></th>
          </tr>
        </thead>

        <tbody>

          <tr
            *ngFor="let row of reporteEquipos; let i = index"
            class="border-t border-black/5">

            <!-- EQUIPO -->
            <td class="px-4 py-3">
              <select
                class="w-full h-10 px-3 rounded-lg border border-black/10"
                [(ngModel)]="row.equipoId"
                (ngModelChange)="onEquipoChange(row)"
                name="equipo-{{i}}">

                <option value="">Seleccione</option>
                <option *ngFor="let eq of equipos" [value]="eq._id">
                  {{ eq.nombre }}
                </option>
              </select>
            </td>

            <!-- HOROMETRO INICIAL -->
            <td class="px-4 py-3">
              <input
                type="number"
                [(ngModel)]="row.horometroInicial"
                (ngModelChange)="calcularHoras(row)"
                name="hini-{{i}}"
                class="w-full h-10 text-center rounded-lg border border-black/10">
            </td>

            <!-- HOROMETRO FINAL -->
            <td class="px-4 py-3">
              <input
                type="number"
                [(ngModel)]="row.horometroFinal"
                (ngModelChange)="calcularHoras(row)"
                name="hfin-{{i}}"
                class="w-full h-10 text-center rounded-lg border border-black/10">
            </td>

            <!-- HORAS -->
            <td
              class="px-4 py-3 text-center font-semibold"
              [class.text-blue-600]="row.horasTrabajadas > 0"
              [class.text-red-600]="row.horasTrabajadas === 0">
              {{ row.horasTrabajadas }} h
            </td>

            <!-- COMBUSTIBLE -->
            <td class="px-4 py-3">
              <input
                type="number"
                [(ngModel)]="row.combustibleGalones"
                name="comb-{{i}}"
                class="w-full h-10 text-center rounded-lg border border-yellow-300">
            </td>

            <!-- ESTADO -->
            <td class="px-4 py-3">
              <select
                [(ngModel)]="row.estado"
                name="estado-{{i}}"
                class="w-full h-10 px-2 rounded-lg text-sm font-semibold border"
                [ngClass]="{
                  'border-green-300 text-green-700 bg-green-50': row.estado === 'OPERATIVO',
                  'border-orange-300 text-orange-700 bg-orange-50': row.estado === 'MANTENIMIENTO'
                }">
                <option value="OPERATIVO">Operativo</option>
                <option value="MANTENIMIENTO">Mantenimiento</option>
              </select>
            </td>

            <!-- DELETE -->
            <td class="px-4 py-3 text-center">
              <button
                (click)="removeEquipoRow(i)"
                class="text-red-500 hover:text-red-700">
                <i class="bi bi-x-lg"></i>
              </button>
            </td>

          </tr>

        </tbody>

      </table>

      <div class="p-4">
        <button
          (click)="addEquipoRow()"
          class="text-sm font-semibold text-blue-600 hover:underline cursor-pointer">
          + Agregar equipo
        </button>
      </div>


    </div>

    <!-- ===============================
         OBSERVACIONES
    ================================= -->
    <div>
      <label class="block mb-2 text-xs font-semibold uppercase text-black/60">
        Observaciones operativas
      </label>
      <textarea
        rows="3"
        placeholder="Paradas, fallas, mantenimiento correctivo, incidentes..."
        class="w-full px-4 py-3 rounded-xl border border-black/10 text-sm resize-none">
      </textarea>
    </div>

    <!-- ===============================
         ACTIONS
    ================================= -->
    <div class="pt-6 flex justify-end gap-4 border-t border-black/5">

      <button
        class="h-11 px-6 rounded-xl
               text-sm font-medium text-black/70
               hover:bg-black/5 transition">
        Cancelar
      </button>

      <button
        class="h-11 px-7 rounded-xl
               text-sm font-semibold text-black
               bg-gradient-to-r from-yellow-400 to-yellow-300
               shadow-[0_15px_35px_-10px_rgba(234,179,8,.9)]
               hover:from-yellow-300
               active:scale-95 transition-all">
        Guardar
      </button>

    </div>

  </div>
</section>
